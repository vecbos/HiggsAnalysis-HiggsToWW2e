--- Recipe to build and run the H->WW / V+jets / J-Psi analysis in 3_X_Y ---

scramv1 p CMSSW CMSSW_3_3_6
cd CMSSW_3_3_6/src
cmsenv

cvs co -r V19-3_3_X -d HiggsAnalysis/HiggsToWW2e UserCode/HiggsAnalysis/HiggsToWW2e
cvs co -r V00-3_3_X HiggsAnalysis/HiggsToWW2Leptons
addpkg RecoEgamma/ElectronIdentification
cvs co -r V01-3_2_X -d MyAnalysis/IsolationTools UserCode/emanuele/MyAnalysis/IsolationTools

cp /afs/cern.ch/user/e/emanuele/public/4Likelihood/PDFsSQLite/CMSSW_3_2_X/electronIdLikelihoodTkIsolated.db HiggsAnalysis/HiggsToWW2e/test/python
cd RecoEgamma/ElectronIdentification/python/
rm likelihoodPdfsDB_cfi.py
wget http://emanuele.web.cern.ch/emanuele/ElectronID/patchLikelihoodDb/likelihoodPdfsDB_cfi.py
cd -

scramv1 b

cd HiggsAnalysis/HiggsToWW2e/test/python
(1) H->WW trees:
cmsRun HWW2eAnalysis_cfg.py
(2) V+jets trees:
cmsRun VecBosAnalysis_data_cfg.py
cmsRun VecBosAnalysis_MC_cfg.py
(3) J/Psi trees:
cmsRun JPsiAnalysis_data_cfg.py
cmsRun JPsiAnalysis_MC_cfg.py

* crab and multicrab cfgs examples are in:
HiggsAnalysis/HiggsToWW2e/test/crab


--- Recipe to build and run the H->WW analysis in 2_2_X ---

> scramv1 p CMSSW CMSSW_2_2_12
cd CMSSW_2_2_12/src/

> in 2_2_X check out the extra tags for correct isolation modules (no more need in 3XX)

cvs co -r V00-16-07  DataFormats/RecoCandidate
cvs co -r V00-02-05  EgammaAnalysis/EgammaIsolationProducers
cvs co -r V01-02-00  PhysicsTools/IsolationAlgos
cvs co -r V00-02-03  RecoEgamma/EgammaIsolationAlgos
cvs co -r V00-01-10  RecoEgamma/ElectronIdentification

> check out the Higgs->2e2nu package and the dependenies:

cvs co -r V05-2_2_X -d HiggsAnalysis/HiggsToWW2e UserCode/HiggsAnalysis/HiggsToWW2e
cvs co -r V00-2_2_X HiggsAnalysis/HiggsToWW2Leptons
cvs co -r V03-2_1_X -d MyAnalysis/IsolationTools UserCode/emanuele/MyAnalysis/IsolationTools

> take the new electron likelihood PDFs (done with Summer08 21X samples):

cp /afs/cern.ch/user/e/emanuele/public/4Likelihood/PDFsSQLite/CMSSW_2_1_X/electronIdLikelihoodTkIsolated.db HiggsAnalysis/HiggsToWW2e/test/python

> patch the DB path:
cd RecoEgamma/ElectronIdentification/python/
rm likelihoodPdfsDB_cfi.py
wget http://emanuele.web.cern.ch/emanuele/ElectronID/patchLikelihoodDb/likelihoodPdfsDB_cfi.py
cd -


scramv1 b

> run
cd HiggsAnalysis/HiggsToWW2e/test/python
cmsRun HWW2eAnalysis_cfg.py






--- Recipe to build and run the H->WW analysis in 2_1_X ---

> scramv1 p CMSSW CMSSW_2_1_17
cd CMSSW_2_1_17/src/

> in 2_1_X check out the extra tags for correct isolation modules (no more need in 3XX)

cvs co -r V00-16-07  DataFormats/RecoCandidate
cvs co -r V00-02-05  EgammaAnalysis/EgammaIsolationProducers
cvs co -r V01-02-00  PhysicsTools/IsolationAlgos
cvs co -r V00-02-03  RecoEgamma/EgammaIsolationAlgos
cvs co -r V01-06-05  CondFormats/JetMETObjects
cvs co -r V01-08-10  JetMETCorrections/Configuration
cvs co -r V02-09-00  JetMETCorrections/Modules

> check out the Higgs->2e2nu package and the dependenies:

cvs co -r V10-2_1_X HiggsAnalysis/HiggsToWW2e
cvs co -r V04-2_1_X HiggsAnalysis/HiggsToWW2Leptons
cvs co -r V03-2_1_X -d MyAnalysis/IsolationTools UserCode/emanuele/MyAnalysis/IsolationTools

scramv1 b

> run
cd HiggsAnalysis/HiggsToWW2e/test/python
cmsRun HWW2eAnalysis_cfg.py










--- Recipe to build and run the H->WW->2e2nu analysis in CMSSW_1_6_9 ---

> get the release:
scramv1 p -n vanilla169 CMSSW CMSSW_1_6_9
cd vanilla169/src 

> check out the necessary packages:
cvs co -r V00-00-04 	      EgammaAnalysis/EgammaIsolationProducers
cvs co -r V00-00-07-02        EgammaAnalysis/ElectronIDAlgos
cvs co -r V00-00-04           EgammaAnalysis/ElectronIDProducers
cvs co -r V00-00-03-01        EgammaAnalysis/ElectronIDESSources
cvs co -r V00-01-01           CondCore/EgammaPlugins
cvs co -r V02-06-02           CondFormats/DataRecord
cvs co -r V00-02-00           CondFormats/EgammaObjects
cvs co -r V00-01-03           CondFormats/PhysicsToolsObjects
cvs co -r V00-07-00-02	      DataFormats/EgammaCandidates
cvs co -r V00-00-04           RecoEgamma/EgammaIsolationAlgos
cvs co                        HiggsAnalysis/HiggsToWW2Leptons
cvs co -r V02-1_6_9	      HiggsAnalysis/HiggsToWW2e
cvs co -r V02-15-10           TrackingTools/TrackAssociator

source HiggsAnalysis/HiggsToWW2e/doc/patch.src

[ --- running on the soups:
> to run on the soups saving the process ID, etc, add:
cvs co -r V06-18-03      PhysicsTools/HepMCCandAlgos

> and modify the ttbar cross sections:
vector<double> CSA07EventWeightProducer::GetTTbarCrossSection() {
  vector<double> vec;
  vec.push_back(619.0);
  vec.push_back(176.0);
  vec.push_back(34.0);
  vec.push_back(6.0);
  vec.push_back(1.5);
  return vec;
}

> and remember to turn on the CSA07WeightProducer module in the path "hlRecoPath" and
  turn on the dumping of the infos with 
  replace treeDumper.dumpGenInfo = true
  in the cfg file.

> if the soups are skimmed, only AOD are saved, where trackExtras are not present. Do:
  replace treeDumper.saveFatTrk = false

end running on the soups --- ]

> build and test interactively:
scramv1 b
cmsRun HiggsAnalysis/HiggsToWW2e/test/HWW2eAnalysis.cfg

> to run with CRAB, change, in EgammaAnalysis/ElectronIDESSources/data/likelihoodPdfsDB.cfi:
replace CondDBCommon.connect = "sqlite_file:electronIdLikelihoodTkIsolated.db"    
replace CondDBCommon.catalog = "file:electronIdLikelihoodTkIsolatedCRAB.xml"
> and put, in CRAB cfg file:
## files to be put in InputSandBox, full path or in the current directory
## (wildcard * are allowed): comma separated list
additional_input_files = /afs/cern.ch/user/e/emanuele/public/4Likelihood/PDFsSQLite/CMSSW_1_6_8/electronIdLikelihoodTkIsolated.db, 
/afs/cern.ch/user/e/emanuele/public/4Likelihood/PDFsSQLite/CMSSW_1_6_8/electronIdLikelihoodTkIsolatedCRAB.xml


--- Recipe to build and run the H->WW->2e2nu analysis in CMSSW_1_8_4 ---

recipe is not tested: it compiles for now in 1_8_4

cvs co -r V08-12-11      DataFormats/Candidate
cvs co -r V00-01-00      EgammaAnalysis/ElectronIDESSources
cvs co -r V00-00-08      EgammaAnalysis/ElectronIDProducers
cvs co -r edm-27May08    HiggsAnalysis/HiggsToWW2e


--- Recipe to build and run the H->WW->2e2nu analysis in CMSSW_2_0_9 ---

cvs co -r V09-00-04      DataFormats/Candidate
cvs co -r V01-2_0_9      HiggsAnalysis/HiggsToWW2e
cvs co -r V07-00-07      PhysicsTools/CandAlgos
cvs co -r V09-00-05      PhysicsTools/CandUtils

